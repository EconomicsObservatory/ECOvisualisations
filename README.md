<div align="left"><img src="https://raw.githubusercontent.com/EconomicsObservatory/ECOvisualisations/main/guidelines/logos/eco-bg-dark.png" width="800"/></div>

# Economics Observatory Visualisation Repository  

[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/EconomicsObservatory/ECOvisualisations/blob/main/LICENSE)
[![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/EconomicsObservatory/ECOvisualisations/blob/main/guidelines/tutorial.ipynb)
[![GitHub last commit](https://img.shields.io/github/last-commit/EconomicsObservatory/ECOvisualisations?label=last%20update)](https://github.com/EconomicsObservatory/ECOvisualisations)

[**Website**](https://www.economicsobservatory.com/)
| [**Visualisations**](https://github.com/EconomicsObservatory/ECOvisualisations)
| [**Data**](https://github.com/EconomicsObservatory/ECOdataHUB)
|

Here you will find all the data visualisations and infographics attached to our articles published on the _Observatory_ website. Each visualisation is published under an open source [MIT licence](LICENSE), and you are free to reuse/reproduce/redistribute, with attribution.

## üåå Visualisations

We try to follow industry best-practices in data visualisation and try to establish our very own visualisation guidelines for all chart types. You can read about these, as well as the tools we use in **[üìêvisualisation guidelines](/guidelines)** .  

Date | Article | Repository | Code
--- | --- | --- | ---
2021-06-09 | [What are the big economic challenges facing the new Welsh Government?](https://www.economicsobservatory.com/what-are-the-big-economic-challenges-facing-the-new-welsh-government) | [folder](/articles/2021-06-09-what-are-the-big-economic-challenges-facing-the-new-welsh-government)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-06-09-what-are-the-big-economic-challenges-facing-the-new-welsh-government/parser.ipynb)
2021-05-26 | [Update: Are small businesses ready to compete as consumers move online?](https://www.economicsobservatory.com/update-are-small-businesses-ready-to-compete-as-consumers-move-online) | [folder](/articles/2021-05-26-update-are-small-businesses-ready-to-compete-as-consumers-move-online)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-05-26-update-are-small-businesses-ready-to-compete-as-consumers-move-online/parser.ipynb)
2021-05-25 | [How are Covid-19 and Brexit affecting ports in Wales?](https://www.economicsobservatory.com/how-are-covid-19-and-brexit-affecting-ports-in-wales) | [folder](/articles/2021-05-25-how-are-covid-19-and-brexit-affecting-ports-in-wales)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-05-25-how-are-covid-19-and-brexit-affecting-ports-in-wales/parser.ipynb)
2021-05-19 | [What is the likely impact of advertising restrictions on obesity?](https://www.economicsobservatory.com/what-is-the-likely-impact-of-advertising-restrictions-on-obesity) | [folder](/articles/2021-05-18-what-is-the-likely-impact-of-advertising-restrictions-on-obesity)  |
2021-05-17 | [Why should we care about obesity?](https://www.economicsobservatory.com/why-should-we-care-about-obesity) | [folder](/articles/2021-05-17-why-should-we-care-about-obesity)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-05-17-why-should-we-care-about-obesity/parser.ipynb)
2021-05-12 | [What is the future of commuting to work?](https://www.economicsobservatory.com/what-is-the-future-of-commuting-to-work) | [folder](/articles/2021-05-12-what-is-the-future-of-commuting-to-work)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-05-12-what-is-the-future-of-commuting-to-work/parser.ipynb)
2021-05-05 | [Update: Which firms and industries have been most affected by Covid-19?](https://www.economicsobservatory.com/update-which-firms-and-industries-have-been-most-affected-by-covid-19) | [folder](/articles/2021-05-05-which-firms-and-industries-have-been-most-affected-by-covid-update)  | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-05-05-which-firms-and-industries-have-been-most-affected-by-covid-update/parser.ipynb)
2021-04-19 | [How should governments source public services during a crisis?](https://www.economicsobservatory.com/how-should-governments-source-public-services-during-a-crisis) | [folder](/articles/2021-04-19-how-should-governments-source-public-services-during-a-crisis) | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-04-19-how-should-governments-source-public-services-during-a-crisis/parser.ipynb)
2021-04-14 | [A year in the UK labour market: what‚Äôs happened over the coronavirus pandemic?](https://www.economicsobservatory.com/a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic) | [folder](/articles/2021-04-14-a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic) | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-04-14-a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic/parser.ipynb)
2021-04-09 | [How are economic models adapting to rising inequality and the pandemic?](https://www.economicsobservatory.com/how-are-economic-models-adapting-to-rising-inequality-and-the-pandemic) | [folder](/articles/2021-04-09-how-are-economic-models-adapting-to-rising-inequality-and-the-pandemic) | [![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/economicsobservatory/ecovisualisations/blob/main/articles/2021-04-09-how-are-economic-models-adapting-to-rising-inequality-and-the-pandemic/parser.ipynb)

### Nomenclature

In the world of data visualisation (even in the expert academic and professional literature) the expressions of _figure, chart, plot, panel, graph, diagram, visualisation_ (and possibly others) are conflated and used (incorrectly?) interchangeably, sometimes with the same expression referring to completely different graphical objects under various contexts. We believe that this might cause confusion for the reader and therefore, at the _Observatory_, we strive to maintain the following nomenclature to refer to our graphical representations of data:

- At the _Observatory_, we publish __articles__. 
- Each _article_ may contain several __figures__.
- Each _figure_ may contain several __charts__. Sometimes we call these _charts_ __panels__. For example, imagine a horizontal figure that contains two line charts, side-by-side. We might call these components _Figure 1 chart a_ and refer to it as _Figure 1 panel a_, or just simply  _Figure 1a_.
- Each _chart_ may be composed of multiple __visualisations__. For example, a line chart might also have points highlighting and delimiting its segments. In this case, we would have a _line plot_ and a _scatter plot_ visualisation layered on top of each other, composing the _chart_. To add to your confusion, we sometimes may call these components simply _line chart_ or _scatter chart_ instead of _plot_, but in this case we actually refer to the _visualisations_ themselves - as various forms of graphical data representation. We chose to stick with the _visualisation_ name, since not all _charts_ are _plots_ in the classical sense: typically _plot_ is an expression reserved in colloquial speech to refer to a _line plot, scatter plot, polar plot_ or even a _box plot_, and we typically use _chart_ for maybe a _pie chart, bar chart, column chart_ or even _candlestick chart_. However, there are also more complex visualisation forms, such as a _Sankey diagram_, a _network graph_, a _histogram_ or even _beeswarm_. Therefore, in order to unequivocally refer to all of these graphical data representation tpyes, we use __visualisation__.

To summarise: 
- _Visualisations_ are chart components. 
  - _plot, graph, diagram_ (and depending on context _chart_ also) simply translate to _visualisation_
- _Figures_ are made up of one or more _charts_ (or _= panels_).
- Articles may contain one of more _figures_.
- The _Observatory_ has a collection of _articles_.

### Structure

Under **[articles](/articles)** each visualisation has their own folder, and within that folder you will find separate subfolder for the **data** (in `csv` format) , the **visualisation** (in `json`), and in some cases accompanying `HTML`, `CSS` and `JavaScript`. The naming convention for articles is `yyyy-mm-dd-<ARTICLE_ID>`. We try to maintain that `<ARTICLE_ID>` matches the `URL permalink` of the article from the website. We are currently transitioning this scheme to an updated one, where each folder contains a `config.json` file, listing all of the respective article's metadata. The `<ARTICLE_ID>` cannot contain `/` characters.

The articles may contain figures - each composed of one or more charts. Each chart has their own (usually [Vega-lite](https://vega.github.io/vega-lite/) or [Vega](http://vega.github.io/), but sometimes a [D3plus](http://d3plus.org/) or [eCharts](https://echarts.apache.org/)) `json` specification. For composite figures containing multiple charts, we may produce (depending on the _tool_ used) a separate file for each chart (e.g. `fig1` or `fig2a` and `fig2b`), but sometimes this is handled within the tool and only one file, with the composite figure (`fig2`) is produced. We normalize the data and compile the visualisations using the **`parser.ipynb`** [Jupyter](https://jupyter.org/) notebook. 

- The automatically generated `README.md` file contains a sneak peek of all the charts included in the article, in the form of _static_ `.png` images and their names.
- The `raw` folder contains the original data, as we have received it from the author (depending on the circumstances, this might not always be public)
- The `data` folder contains the normalised data and it is typically the output of the `parser`.ipynb. Usually (unless data is shared between charts) there is a separate data file generated for each chart.
- The `visualisation` folder contains multiple folders corresponding to the names of charting _tools_ used (e.g. `vega-lite` or `d3plus`). Some charts may be replicated over multiple tools. 
- Each _tool_ folder contains several _theme_ folders (but typically two, `light` and `dark`)
- Each _theme_ folder contains several _aspect_ folders (but typically two, `desktop` and `mobile`)
- For some older charts, these subfolders under `visualisation` might be missing. In this case, the `vega-lite` tool is assumed to be used as the _default_, with the `light` theme and the `desktop` aspect.
- Each full path under `visualisation` (e.g. `visualisation/vega-lite/dark/desktop`) contains:
  - A `<CHART_ID>.json` (or `.js` for the case of *D3plus* and some other tools) file for each chart (typically one for each figure in the article, but composite figures may be split over multiple charts). This is is what is typically called the _chart specification_ or the _chart config_.
  - An automatically generated `<CHART_ID>.HTML` file for direct embedding. This uses additional `JavaScript` code to offer a full-fledged `HTML` page with the data visualisation working out of the box. This is useful in some cases, when problems with directly embedding the _chart specification_ may arise.
  - Whenever data compatibility issues are likely to arise, or the data cannot be formatted using simple in-memory data manipulation techniques (e.g. *Vega* data transforms) *only*, we also generate a file ending in `_local.json`, where all data is stored as a static `Javascript Object` inside the chart specification `json` file (this is the *safest* but also the *slowest*).
  - The format of the `<CHART_ID>` should follow the `fig1a_chart-name-with-space` naming convention (with `_local` added at the end, as necessary). The `<CHART_ID>` cannot contain `/` characters.
- `config.json` holds the article metadata (this has just been introduced recently, so it may not exist for all articles yet). It has the following keys:
  - `uid`: the article's unique identifier
  - `name`: the article's name - same as the `<ARTICLE_ID>` mentioned above
  - `version`: version of the article (`1` by default). For _update_ type posts, this is typically larger than `1`.
  - `previous, next`: the article `uid`s that this article follows/precedes
  - `title`: human readable article title as presented on the _Website_ / _Trello_ (the two should match)
  - `url`: the published article's _URL_ on the website
  - `trello`: link to the _Trello_ card of the article
  - `github`: link to article's folder in this repository under [`/articles`](/articles)
  - `charts`: `JSON` list `[]` of `<CHART_ID>`s included in the article. Can contain just `<CHART_ID>`s - then the parent article's path is assumed - or a full path `<ARTICLE_ID>/<CHART_ID>`, pointing to another article's chart.
  
Issues of the [ECO magazine](https://www.economicsobservatory.com/magazine-archive) behave like articles and can be found under the **[magazine](magazine/)** folder (e.g. [`magazine/issue-1`](magazine/issue-1)).

### Embedding

1. You may use any of the chart specifications listed above - the "naked" or the `_local` versions of the `<CHART_ID>`s for direct embedding on compatible websites (e.g. _Wordpress_ or _Flourish_).
2. You may use the `HTML` files generated to overcome compatibility challenges of more stubborn hosting environments.
3. Furthermore, we maintain a global [`viewer.html`](/viewer.html) that can take a data source parameters as its _URL hash_. E.g. visiting [`https://economicsobservatory.github.io/ECOvisualisations/viewer.html#`**`articles/2021-04-14-a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic/visualisation/fig5_absent_from_work`**](https://economicsobservatory.github.io/ECOvisualisations/viewer.html#articles/2021-04-14-a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic/visualisation/fig5_absent_from_work) will open the viewer for Figure 5 of [this](https://www.economicsobservatory.com/a-year-in-the-uk-labour-market-whats-happened-over-the-coronavirus-pandemic) article (currently, this works for charts under the `vega-lite` specification, but we are continuously updating it to include all of our charts, regardless of the tool used to generate it). 
  
**Option 3**, using the `viewer.html` is the **recommended way** for embedding our data visualisations on other sites. This is is because if we change our repository structure and/or charting API in the future, we can ensure that all backwards compatibility with existing embedded charts is maintained, but the updates (such as a new theme) are reflected on all of our charts instantly.  
  
You may think of this as a form of **üç® ChaaS** - chart as a service.

## üìä Data

All of our chart data are published under their respective article subfolders, but on top of that we also operate the **[ECOdataHUB](https://github.com/EconomicsObservatory/ecodatahub)**, where you will find a trove of data used in our articles and analyses, as well as interactive visualisation exploration interfaces. Whenever possible, we try to follow a [TIDY](http://vita.had.co.nz/papers/tidy-data.pdf) format. You can read about our data zen in [**üìêdata guidelines**](https://github.com/EconomicsObservatory/ECOdataHUB/tree/main/guidelines).  

## üíª Build

To learn about the technologies used or build a similar charts like this you can follow the instructions on the [guidelines](/guidelines) page. If you discovered any bugs or have any specific suggestions or feature requests please use the [Issues](https://github.com/EconomicsObservatory/ecovisualisations/issues) page.

## üìß Contact

The Economics Observatory is run out of the [University of Bristol](https://www.bristol.ac.uk/) and you can read more **[about us here](https://www.economicsobservatory.com/about)**. For any technical or visualization-related questions you may contact [D√©nes](mailto:d.csala@lancaster.ac.uk). For economics-related queries and anything else about the site content, or further collaborations, you may contact [Charlie](mailto:charlie.meyrick@bristol.ac.uk).

## üì∞ Reference

If you would like to use the site as an information source or any of the visualizations or the data presented, you are free to do so under an [MIT licence](LICENSE) (you're free to modify anything, as long you as you mention us). Furthermore, the content of all of our articles presented on the [Economics Observatory website](https://www.economicsobservatory.com/about) is shareable under a [Creative Commons ShareAlike 4.0](http://creativecommons.org/licenses/by-sa/4.0/) license.  

If you would like to refer to it in publications or other scientific works of any kind, please use the following style:
 - `Title of article or chart`, Economics Observatory, 2021, `link to article or chart`, published on: `publication date`, accessed on: `access date`
