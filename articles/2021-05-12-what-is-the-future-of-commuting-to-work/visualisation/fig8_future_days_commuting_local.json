{ "config": { "view": { "continuousWidth": 400, "continuousHeight": 300, "stroke": null } }, "layer": [{ "mark": { "type": "bar", "height": 20, "opacity": 0.9 }, "encoding": { "color": { "type": "nominal", "field": "response", "legend": null, "scale": { "domain": ["0 days", "1 day ", "2 days ", "3 days", "4 days", "5+ days "], "range": ["#00A767", "#36B7B4", "#179FDB", "#0063AF", "#243B5A", "#122B39"] } }, "order": { "type": "nominal", "field": "response" }, "x": { "type": "quantitative", "aggregate": "sum", "axis": { "domainColor": "#676A86", "format": ".0%", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "% of respondents", "titleAnchor": "end", "titleColor": "#676A86", "titleFontSize": 10, "titleFontWeight": "normal", "titleY": -17 }, "field": "percent", "scale": { "domain": [0, 0.25] }, "sort": [] }, "y": { "type": "nominal", "axis": { "domainColor": "#676A86", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "", "titleColor": "#676A86" }, "field": "response", "sort": [] } } }, { "mark": { "type": "text", "align": "right", "dx": -5, "dy": 1 }, "encoding": { "color": { "condition": { "value": null, "test": "(datum.percent < 0.08)" }, "value": "white" }, "order": { "type": "nominal", "field": "response" }, "text": { "type": "quantitative", "field": "percent", "format": ".0%" }, "x": { "type": "quantitative", "aggregate": "sum", "field": "percent", "stack": "zero" }, "y": { "type": "nominal", "axis": { "domainColor": "#676A86", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "", "titleColor": "#676A86" }, "field": "response", "sort": [] } } }, { "mark": { "type": "text", "align": "left", "dx": 5, "dy": 1 }, "encoding": { "color": { "condition": { "value": null, "test": "(datum.percent > 0.08)" }, "value": "#676A86" }, "order": { "type": "nominal", "field": "response" }, "text": { "type": "quantitative", "field": "percent", "format": ".0%" }, "x": { "type": "quantitative", "aggregate": "sum", "field": "percent", "stack": "zero" }, "y": { "type": "nominal", "axis": { "domainColor": "#676A86", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "", "titleColor": "#676A86" }, "field": "response", "sort": [] } } }], "data": { "name": "data-46c41025d7da8b531cd2e8609ac38ae6" }, "height": { "step": 25 }, "title": "", "width": 300, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": { "data-46c41025d7da8b531cd2e8609ac38ae6": [{ "response": "0 days", "percent": 0.248 }, { "response": "1 day ", "percent": 0.099 }, { "response": "2 days ", "percent": 0.206 }, { "response": "3 days", "percent": 0.197 }, { "response": "4 days", "percent": 0.105 }, { "response": "5+ days ", "percent": 0.145 }] } }