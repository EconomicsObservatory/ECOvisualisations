{"config": {"view": {"continuousWidth": 400, "continuousHeight": 300, "stroke": null}}, "layer": [{"mark": {"type": "bar", "color": "#36B7B4", "height": 15, "opacity": 0.9}, "encoding": {"color": {"type": "nominal", "field": "category", "legend": {"labelLimit": 400, "title": ""}, "scale": {"range": ["#0063AF", "#36B7B4", "#E54753", "#676A86"]}, "sort": []}, "order": {"type": "nominal", "field": "income"}, "tooltip": {"type": "nominal", "field": "tooltip"}, "x": {"type": "quantitative", "axis": {"domainColor": "#676A86", "format": ".0%", "grid": false, "labelAngle": 0, "labelColor": "#676A86", "orient": "bottom", "tickColor": "#676A86", "tickCount": 10, "title": "", "titleColor": "#676A86"}, "field": "value", "scale": {"domain": [0, 1]}, "stack": "zero"}, "y": {"type": "nominal", "axis": {"domainColor": "#676A86", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "% by income band", "titleAlign": "left", "titleAngle": 0, "titleBaseline": "bottom", "titleColor": "#676A86", "titleX": 0, "titleY": -5}, "field": "income", "sort": []}}, "transform": [{"calculate": "datum.income+' \ud83c\udfe2 '+datum.category+' \ud83d\udcc8 '+round(datum.value*100)+'%'", "as": "tooltip"}, {"calculate": "round(datum.value*100)", "as": "x"}]}, {"mark": {"type": "text", "align": "right", "dx": -2, "dy": 1}, "encoding": {"color": {"condition": {"value": null, "test": "(datum.value < 0.04)"}, "value": "white"}, "order": {"type": "nominal", "field": "income"}, "text": {"type": "quantitative", "field": "x", "format": ".0f"}, "tooltip": {"type": "nominal", "field": "tooltip"}, "x": {"type": "quantitative", "field": "value", "stack": "zero"}, "y": {"type": "nominal", "axis": {"domainColor": "#676A86", "grid": false, "labelColor": "#676A86", "tickColor": "#676A86", "title": "% by income band", "titleAlign": "left", "titleAngle": 0, "titleBaseline": "bottom", "titleColor": "#676A86", "titleX": 0, "titleY": -5}, "field": "income", "sort": []}}, "transform": [{"calculate": "datum.income+' \ud83c\udfe2 '+datum.category+' \ud83d\udcc8 '+round(datum.value*100)+'%'", "as": "tooltip"}, {"calculate": "round(datum.value*100)", "as": "x"}]}], "data": {"url": "https://raw.githubusercontent.com/EconomicsObservatory/ECOvisualisations/main/articles/2021-07-21-will-people-go-back-to-the-office-after-the-pandemic/data/fig1_income.csv"}, "height": {"step": 20}, "title": "", "width": 200, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json"}